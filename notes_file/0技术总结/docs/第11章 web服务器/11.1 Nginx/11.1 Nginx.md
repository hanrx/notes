
# 1、基本概念

## 1.1、nginx是什么
Nginx(engine x)是一个高性能的HTTP和反向代理服务器，特点是占有内存少，并发能力强，事实上nginx的并发能力确实在同类型的网页服务器中表现较好。

Nginx可以作为静态页面的web服务器，同时还支持cGI协议的动态语言，比如perl、php等。但是不支持java。Java程序只能通过与tomcat配合完成。Nginx专为性能
优化而开发，性能是其最重用的考量，实现上非常注重效率，能经受高负载的考验，有报告表明能支持高达50，000个并发连接数。
https://lnmp.org/nginx.html

## 1.2、反向代理
* 正向代理：在客户端（浏览器）配置代理服务器，通过代理服务器进行互联网访问
  > Nginx不仅可以做反向代理，实现负载均衡。还能用作正向代理来进行上网等功能。
  > 正向代理：如果把局域网外的Internet想象成一个巨大的资源库，则局域网中的客户端想要访问Internet，则需要通过代理服务器来访问，这种代理服务就称为正向代理。
  > ![img.png](img.png)
  > ![img_1.png](img_1.png)
* 反向代理：
  > 反向代理，其实客户端对代理是无感知的，因为客户端不需要任何配置就可以访问，我们只需要请求发送到方向代理服务器，由反向代理服务器去选择目标服务器获取数据后，
  > 再返回给客户端，此时反向代理服务器和目标服务器对外就是一个服务器，暴露的是代理服务器地址，隐藏了真实服务器IP地址。
  > ![img_3.png](img_3.png)

## 1.3、负载均衡
客户端发送多个请求到服务器，服务器处理请求，有一些可能要与数据库进行交互，服务器处理完毕后，再将结果返回给客户端。

这种架构模式对于早期的系统相对单一，并发请求相对较少的情况下是比较适合的，成本也低。但是随着信息数量的不断增长，访问量和数据量的飞速增长，以及系统业务
的复杂度增加，这种架构会造成服务器相对应客户端的请求日益缓慢，并发量特别大的时候，还容易造成服务器直接崩溃。很明显这是由于服务器性能的瓶颈造成的问题，那么如何解决这种情况呢？
 
单个服务器解决不了，我们增加服务器的数量，然后将请求分发到各个服务器上，将原先请求集中到单个服务器上的情况改为将请求分发到多个服务器上，将负载分发到不同
的服务器，也就是我们所说的负载均衡。
![img_4.png](img_4.png)

## 1.4、动静分离
为加快网站的解析速度，可以把动态页面和静态页面由不同的服务器来解析，加快解析速度。降低原来单个服务器的压力。
![img_5.png](img_5.png)
![img_6.png](img_6.png)

# 2、nginx安装、常用命令和配置文件

## 2.1、在linux系统中安装nginx
* 1、使用远程连接工具连接linux操作系统。![img_7.png](img_7.png)
* 2、nginx需要的依赖：pcre-8.37.tar.gz、openssl-1.0.1t.tar.gz、zlib-1.2.8.tar.gz、
  * 第一步，安装pcre：wget http://downloads.sourceforge.net/project/pcre/pcre/8.37/pcre-8.37.tar.gz
    解压文件：。./configure完成后，回到pcre目录下执行make，再执行make install
    ![img_9.png](img_9.png)
  * 第二步，安装openssl
  * 第三步，安装zlib。
  
  * 第二种方式：yum -y install make zlib zlib-devel gcc-c++libtool openssl openssl-devel。![img_8.png](img_8.png)
* 3、安装nginx
  * 解压缩nginx-xx.tar.gz包。
    ![img_10.png](img_10.png)
  * 进入解压缩目录，执行./configure。 (检查)
    ![img_11.png](img_11.png)
  * make&&make install。（编译/编译安装）
    ![img_12.png](img_12.png)
  安装成功之后，在/usr下多出来一个文件夹local/nginx，在nginx有sbin有启动脚本。
* 4、端口设置，开发nginx端口。
  * 查看开放的端口号：firewall-cmd --list-all
  * 设置开放的端口号：firewall-cmd --and-service=http --permanent    
    ![img_13.png](img_13.png)
  * 重启防火墙：firewall-cmd--reload


## 2.2、nginx常用命令
## 2.3、nginx配置文件


# 3、nginx配置实例 1-反向代理

# 4、nginx配置实例 2-负载均衡

# 5、nginx配置实例 3-动静分离


# 6、nginx配置高可用集群


# 7、nginx原理































