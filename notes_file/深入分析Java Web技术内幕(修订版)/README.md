
# 目录/简要总结

## [第1章 深入Web请求过程](docs/第1章深入Web请求过程.md "第1章 深入Web请求过程")

* B/S架构带来两方面的好处：
    * 使用通用的浏览器：简化使用，使用行为可继承性强。
    * 服务端（Server）基于统一的HTTP：简化了开发模式。
* B/S网络架构概述:
    * HTTP采用无状态的短链接通信方式。
* HTTP解析：
    * HTTP Header：控制着用户浏览器的渲染行为和服务器的执行逻辑。
* 浏览器缓存机制：
    * HTTP Head指定所有缓存机制在整个请求/响应链中必须服从的指令。
* DNS域名解析：即将域名解析成IP地址。
    * DNS解析大体过程：
        * 第1步，浏览器会检查浏览器缓存中有没有。
        * 第2步，查找操作系统缓存。
        * 第3步，操作系统会把这个域名发送给这里设置的LDNS，即本地区的域名服务器。
        * 第4步，直接到ROOT Server域名服务器请求解析。
        * 第5步，根域名服务器返回给本地域名服务器一个所查询域的主域名服务器（gTLD Server）地址。
        * 第6步，本地域名服务器（Local DNS Server）再向上一步返回的gTLD服务器发送请求。
        * 第7步，gTLD服务器查找并返回此域名对应的Name Server域名服务器(即域名提供商)的地址。
        * 第8步，Name Server域名服务器得到目标IP记录，连同一个TTL值返回给DNS Server域名服务器。
        * 第9步，返回该域名对应的IP和TTL值，Local DNS Server会缓存这个域名和IP的对应关系，缓存的时间由TTL值控制。
        * 第10步，把解析的结果返回给用户，用户根据TTL值缓存在本地系统缓存中，域名解析过程结束。

* 清除缓存的域名：主要在两个地方缓存结果，一个是Local DNS Server，另外一个是用户的本地机器。
    * Windows：在命令行模式下执行ipconfig/flushdns命令来刷新缓存。
    * Linux：通过/etc/init.d/nscd restart来清除缓存。
    * Java应用：JVM也会缓存DNS的解析结果，这个缓存是在InetAddress类中完成。
    
* 几种域名解析方式：A记录、MX记录、CNAME记录、NS记录和TXT记录。
    * A记录：A代表的是Address，用来指定域名对应的IP地址。
    * MX记录：表示的是Mail Exchange，可以将某个域名下的邮件服务器指向自己的Mail Server。
    * CNAME记录：全称Canonical Name（别名解析）。可以为一个域名设置一个或者多个别名。
    * NS记录：为某个域名指定DNS解析服务器。
    * TXT记录：为某个注解名或域名设置说明。

* CDN工作机制：也就是内容分布网络（Content Delivery Network），它是构筑在现有Internet上的一种先进的流量分配网络。是通过在现有的Internet中增加一层新的网络架构，将网站的内容发布到最接近用户的网络“边缘”，使用户可以就近取得所需的内容，提高用户访问网站的响应速度。有别于镜像，它比镜像更智能，可以做这样一个比喻：CDN = 镜像（Mirror）+ 缓存（Cache）+ 整体负载均衡（GSLB）。
    * 负载均衡：负载均衡（Load Balance）就是对工作任务进行平衡、分摊到多个操作单元上执行。
        * DNS的解析来完成：
            * 优点：用户会直接访问目标服务器，不需要经过其他的代理服务器，通常访问速度会更快。
            * 缺点，由于DNS在用户本地和Local DNS Server都有缓存，一旦某台Web Server挂掉，很难及时更新用户的域名解析结构。
        * 集群负载均衡：
            * 硬件负载均衡：价格昂贵，如F5。优点：性能非常好，缺点：非常贵。
            * 软件负载均衡：成本非常低，直接使用廉价的PC就可以搭建。缺点是一般一次访问请求要经过多次代理服务器，会增加网络延时。
        * 操作系统负载均衡：就是利用操作系统级别的软中断或者硬件中断来达到负载均。
    * CDN动态加速：技术原理就是在CDN的DNS解析中通过**动态的链路探测**来寻找回源最好的一条路径，然后通过DNS的调度将所有请求调度到选定的这条路径上回源，从而加速用户访问的效率。
    

## [第2章 深入分析JavaI/O的工作机制](docs/第2章深入分析JavaIO的工作机制.md "第2章 深入分析JavaI/O的工作机制")








